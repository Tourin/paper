<html xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
    xmlns:cc="http://xmlns.jcp.org/jsf/composite">
    
    <cc:interface>
       <cc:attribute name="src" required="true" />
    </cc:interface>

    <cc:implementation>
    	<audio id="#{cc.attrs.id}0"
        	preload="auto" hidden="true">
        	<source src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        	<embed id="#{cc.attrs.id}_ie80" hidden="true" autostart="false" loop="false" src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        </audio>
        <audio id="#{cc.attrs.id}1"
        	preload="auto" hidden="true">
        	<source src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        	<embed id="#{cc.attrs.id}_ie81" hidden="true" autostart="false" loop="false" src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        </audio>
        <audio id="#{cc.attrs.id}2"
        	preload="auto" hidden="true">
        	<source src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        	<embed id="#{cc.attrs.id}_ie82" hidden="true" autostart="false" loop="false" src="#{request.contextPath}/resources/#{cc.attrs.src}" />
        </audio>
        <script type="text/javascript">
        	(function() {
				var id = 0;
				var player = function() {
        			var a=document.getElementById("#{cc.attrs.id}" + id);
					if(!(a.play instanceof Function)) {
						a=document.getElementById("#{cc.attrs.id}_ie8" + id);
					}
					return a;
				}
				window['#{cc.attrs.id}']=function() {
					player().play();
					id = (id + 1) % 3;
				};
        	})();
        </script>
    </cc:implementation>    
</html>